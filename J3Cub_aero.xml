<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="http://jsbsim.sourceforge.net/JSBSim.xsl"?>
	<!-- *********** 
Aerodynamics FDM for J3Cub.
This is  the original by Eric Hofman. 
It may be replaced by the Datcom version in the file J3Cub_Datcom_aero.xml
	*********** -->

 <aerodynamics>

  <function name="aero/function/kCDge">
      <description>Change_in_drag_due_to_ground_effect</description>
          <table>
              <independentVar>aero/h_b-mac-ft</independentVar>
              <tableData>
                  0.0000        0.4800
                  0.1000        0.5150
                  0.1500        0.6290
                  0.2000        0.7090
                  0.3000        0.8150
                  0.4000        0.8820
                  0.5000        0.9280
                  0.6000        0.9620
                  0.7000        0.9880
                  0.8000        1.0000
                  0.9000        1.0000
                  1.0000        1.0000
                  1.1000        1.0000
              </tableData>
          </table>
  </function>

  <function name="aero/function/kCLge">
      <description>Change_in_lift_due_to_ground_effect</description>
          <table>
              <independentVar>aero/h_b-mac-ft</independentVar>
              <tableData>
                  0.0000        1.2030
                  0.1000        1.1270
                  0.1500        1.0900
                  0.2000        1.0730
                  0.3000        1.0460
                  0.4000        1.0550
                  0.5000        1.0190
                  0.6000        1.0130
                  0.7000        1.0080
                  0.8000        1.0060
                  0.9000        1.0030
                  1.0000        1.0020
                  1.1000        1.0000
              </tableData>
          </table>
  </function>

  <function name="aero/function/kClge">
      <description>Change_in_drag_due_to_ground_effect</description>
          <table>
              <independentVar>aero/h_b-mac-ft</independentVar>
              <tableData>
                  0.0000        0.0480
                  0.1000        0.0480
                  0.1500        0.0480
                  0.2000        0.0480
                  0.3000        0.0615
                  0.4000        0.1229
                  0.5000        0.2709
                  0.6000        0.3815
                  0.7000        0.5882
                  0.8000        0.7928
                  0.9000        0.9620
                  1.0000        0.9880
                  1.1000        1.0000
              </tableData>
          </table>
  </function>

  <function name="aero/function/velocity-induced-fps">
    <description> velocity including the propulsion induced velocity.</description>
    <sum>
      <property>velocities/u-aero-fps</property>
      <property>propulsion/engine/prop-induced-velocity_fps</property>
      <property>propulsion/engine[1]/prop-induced-velocity_fps</property>
      <property>propulsion/engine[2]/prop-induced-velocity_fps</property>
    </sum>
  </function>
 
  <function name="aero/function/qbar-induced-psf">
    <description> q bar including the propulsion induced velocity.</description>
    <product>
      <property>aero/function/velocity-induced-fps</property>
      <property>aero/function/velocity-induced-fps</property>
      <property>atmosphere/rho-slugs_ft3</property>
      <value>0.5</value>
    </product>
  </function>
  
    <function name="aero/function/total-wing-damage">
        <description>Total damage on wings</description>
        <product>
            <sum>
                <property>wing-damage/left-wing</property>
                <property>wing-damage/right-wing</property>
            </sum>
            <value>0.5</value>
        </product>
    </function>

  <axis name="LIFT">

    <function name="aero/force/Lift_propwash">
      <description>Delta lift due to propeller induced velocity</description>
      <product>
          <property>/engines/active-engine/thrust-coefficient</property>
          <property>aero/function/qbar-induced-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>aero/function/kCLge</property>
          <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <tableData>
              -0.22  0.000
               0.00  0.068
               0.31  0.313
               0.62  0.000
            </tableData>
          </table>
      </product>
    </function>

    <function name="aero/force/Lift_alpha">
      <description>Lift due to alpha</description>
      <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>aero/function/kCLge</property>
          <table>

            <!-- USA-35B -->
            <independentVar lookup="row">aero/alpha-wing-rad</independentVar>
            <independentVar lookup="column">aero/Re</independentVar>
            <tableData>
                      1668183  3707224
             -1.5700   0.0000   0.0000
             -0.3491  -0.0085  -0.5085
             -0.2443  -0.5085  -0.8136
             -0.1745  -0.5085  -0.5085
             -0.0873   0.1017   0.1017
              0.0000   0.5339   0.5339
              0.0873   1.2204   1.2204
              0.1309   1.4746   1.4746
              0.1745   1.5000   1.6272
              0.2182   1.6201   1.7797
              0.2618   1.5645   1.8306
              0.3054   1.4272   1.6272
              0.3491   1.3138   1.4238
              1.5700   0.0000   0.0000
            </tableData>

            <!-- Du Y -->
            <!-- <independentVar lookup="row">aero/alpha-wing-rad</independentVar>
            <tableData>
                -0.0349     -0.0500
                -0.0175     0.0500
                0.0000      0.1250
                0.0349      0.3000
                0.0698      0.5000
                0.1047      0.6800
                0.1396      0.8800
                0.1745      1.1000
                0.2094      1.3000
                0.2443      1.4750
                0.2793      1.6200
                0.3142      1.7250
                0.3316      1.7750
                0.3491      1.8130
                0.3665      1.8000
                0.3840      1.7500
                0.4014      1.6200
                0.4189      1.1750
                0.4363      0.7500
            </tableData> -->

          </table>
          <table>
            <independentVar>aero/function/total-wing-damage</independentVar>
            <tableData>
                  0.0000   1
                  1.0000   0
            </tableData>
          </table>
      </product>
    </function>

    <function name="aero/coefficient/CLDf">
        <description>Delta_lift_due_to_flap_deflection</description>
        <product>
            <property>aero/qbar-psf</property>
            <property>metrics/Sw-sqft</property>
            <property>aero/function/kCLge</property>
            <table>
                <independentVar>fcs/flap-pos-deg</independentVar>
                <tableData>
                    0.0000	0.0000
                    10.0000	0.2000
                    20.0000	0.3000
                    30.0000	0.3500
                    40.0000	0.3750
                    50.0000	0.3875
                </tableData>
            </table>
        </product>
    </function>

    <function name="aero/force/Lift_pitch_rate">
        <description>Lift_due_to_pitch_rate</description>
        <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>velocities/q-aero-rad_sec</property>
          <property>aero/ci2vel</property>
          <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <tableData>			<!-- Du Y -->
             -0.035  8.523602
              0.175  6.996364
            </tableData>
          </table>
        </product>
      </function>

      <function name="aero/force/Lift_alpha_rate">
        <description>Lift_due_to_alpha_rate</description>
        <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>aero/alphadot-rad_sec</property>
           <property>aero/ci2vel</property>
           <value> 2.3459 </value>	<!-- Du Y -->
        </product>
      </function>

    <function name="aero/force/Lift_elevator">
       <description>Lift due to Elevator Deflection</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>fcs/elevator-pos-rad</property>
           <!-- value> 0.3274 </value-->	<!-- Du Y -->
		       <!-- + 0.01925112 (5.88%) = 0.3466 -->
		   <table>
            <independentVar>/sim/model/j3cub/pa-18</independentVar>
            <tableData>
               0   0.3274
               1   0.3467
            </tableData>
          </table>
       </product>
    </function>

  </axis>

  <axis name="DRAG">

    <function name="aero/force/Drag_basic">
       <description>Drag at zero lift</description>
       <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <independentVar lookup="column">aero/Re</independentVar>
            <tableData>			<!-- USA-35B -->
                      1668183  3707224
             -1.5700   1.4091   1.4091
             -0.3491   0.1898   0.1736
             -0.2443   0.1567   0.0494
             -0.1745   0.0307   0.0290
             -0.0873   0.0216   0.0208
              0.0000   0.0189   0.0187
              0.0873   0.0216   0.0208
              0.1309   0.0289   0.0279
              0.1745   0.0332   0.0315
              0.2182   0.0435   0.0402
              0.2618   0.0757   0.0707
              0.3054   0.1408   0.1125
              0.3491   0.1898   0.1736
              1.5700   1.4091   1.4091
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/force/Drag_induced">
       <description>Induced drag</description>
         <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>aero/cl-squared</property>
           <property>aero/function/kCDge</property>
           <value> 0.0485 </value>
         </product>
    </function>

    <function name="aero/force/Drag_beta">
       <description>Drag due to sideslip</description>
       <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <table>
            <independentVar lookup="row">aero/beta-rad</independentVar>
            <tableData>
              -1.57    1.2300
              -0.26    0.0500
               0.00    0.0000
               0.26    0.0500
               1.57    1.2300
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/force/Drag_elevator">
       <description>Drag due to Elevator Deflection</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <abs><property>fcs/elevator-pos-rad</property></abs>
           <!-- value> 0.0400 </value-->
		       <!-- + 0.002352941 (5.88%) = 0.042352941 -->
		   <table>
            <independentVar>/sim/model/j3cub/pa-18</independentVar>
            <tableData>
               0   0.0400
               1   0.0424
            </tableData>
          </table>
       </product>
    </function>
    
    <function name="aero/coefficient/CDDf">
        <description>Delta_drag_due_to_flap_deflection</description>
        <product>
            <property>aero/qbar-psf</property>
            <property>metrics/Sw-sqft</property>
            <property>aero/function/kCDge</property>
            <table>
                <independentVar>fcs/flap-pos-deg</independentVar>
                <tableData>
                      0.0000	0.0000
                      10.0000	0.0070
                      20.0000	0.0120
                      30.0000	0.0180
                      40.0000	0.0250
                      50.0000	0.0330
                  </tableData>
            </table>
        </product>
    </function>

    <function name="aero/force/Drag_gear">
       <description>Drag due to gear</description>
         <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <value> 0.0040 </value>
           <property>gear/drag-coef[1]</property> <!-- 36 Bush Wheels" -->
           <property>gear/drag-coef[2]</property> <!-- Floats -->
           <property>gear/drag-coef[3]</property> <!-- Amphibious -->
           <property>gear/drag-coef[4]</property> <!-- Ski -->
           <property>gear/drag-coef[5]</property> <!-- Ski Lite -->
           <property>gear/drag-coef[6]</property> <!-- Sprayer -->
           <property>gear/drag-coef[7]</property> <!-- Door Open/Off -->
           <property>gear/drag-coef[8]</property> <!-- Window Open/Off -->
           <property>gear/drag-coef[9]</property> <!-- Amphibious gear extended -->
         </product>
    </function>

  </axis>

  <axis name="SIDE">

    <function name="aero/force/Side_beta">
       <description>Side force due to beta</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>aero/beta-rad</property>
           <value> -0.1340 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/force/Side_roll_rate">
       <description>Side_force_due_to_roll_rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>aero/bi2vel</property>
           <property>velocities/p-aero-rad_sec</property>
           <table>
            <independentVar lookup="row">aero/Re</independentVar>
            <tableData>			<!-- Du Y -->
              1668183  0.1434
              3707224  0.0022
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/force/Side_yaw_rate">
       <description>Side_force_due_to_yaw_rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>aero/bi2vel</property>
           <property>velocities/r-aero-rad_sec</property>
           <value> 0.1423 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/force/Side_rudder">
       <description>Side_force_due_to_rudder</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>fcs/rudder-pos-rad</property>
           <!--value> 0.0934 </value-->	<!-- Du Y -->
           <!-- + 0.00327 (3.5%) = 0.0967 -->
		   <table>
            <independentVar>/sim/model/j3cub/pa-18</independentVar>
            <tableData>
               0   0.0934
               1   0.0967
            </tableData>
          </table>
       </product>
    </function>

  </axis>

  <axis name="PITCH">

    <function name="aero/moment/Pitch_propwash">
      <description>Pitch moment due to propeller induced velocity</description>
      <product>
          <property>/engines/active-engine/thrust-coefficient</property>
          <property>aero/function/qbar-induced-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>metrics/bw-ft</property>
          <!--value>0.9</value--> <!-- tune-down value -->
          <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <tableData>
              -0.01  0.000
               0.00 -0.023
               0.31 -0.108
               0.40  0.000
            </tableData>
          </table>
      </product>
    </function>

    <function name="aero/moment/Pitch_alpha">
       <description>Pitch moment due to alpha</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/cbarw-ft</property>
           <property>aero/alpha-rad</property>
           <table>
            <independentVar lookup="row">aero/Re</independentVar>
            <tableData>			<!-- Du Y -->
              1668183  -2.0327
              3707224  -1.3432
            </tableData>
            <!--value>0.3</value--> <!-- 0.3 dany, tests, stiffness issue -->
          </table>
       </product>
    </function>

    <function name="aero/moment/Pitch_elevator">
        <description>Pitch moment due to elevator</description>
        <product>
          <property>aero/function/qbar-induced-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>metrics/cbarw-ft</property>
          <property>fcs/elevator-pos-rad</property>
          <!--value> -1.2004 </value-->	<!-- Du Y -->
          <!-- + âˆ’0.07058 (5.88%) = -1.27098 -->
          <!--value> -1.8 </value--> <!-- Du Y --><!--from dany93 -->
          <!-- + -0.10584 (5.88%) = -1.90584 -->
          <table>
            <independentVar>/sim/model/j3cub/pa-18</independentVar>
            <tableData>
              0   -1.2004
              1   -1.2710
              <!--
              0   -1.8
              1   -1.9058
              -->
            </tableData>
          </table>
        </product>
    </function>

    <function name="aero/moment/Pitch_damp">
       <description>Pitch moment due to pitch rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/cbarw-ft</property>
           <property>aero/ci2vel</property>
           <property>velocities/q-aero-rad_sec</property>
           <value> -12.7022 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/moment/Pitch_alphadot">
       <description>Pitch moment due to alpha rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/cbarw-ft</property>
           <property>aero/ci2vel</property>
           <property>aero/alphadot-rad_sec</property>
           <value> -7.5904 </value>   <!-- Du Y -->
       </product>
    </function>

    <function name="aero/coefficient/Cmdf">
        <description>Delta_pitching_moment_due_to_flap_deflection</description>
        <product>
            <property>aero/qbar-psf</property>
            <property>metrics/Sw-sqft</property>
            <property>metrics/cbarw-ft</property>
            <table>
                <independentVar>fcs/flap-pos-deg</independentVar>
                <tableData>
                    0.0000	    0.0000
                    10.0000	   -0.0654
                    20.0000	   -0.0981
                    30.0000    -0.1140
                    40.0000	   -0.1230
                    50.0000	   -0.1290
                </tableData>
            </table>
        </product>
    </function>

  </axis>

  <axis name="ROLL">

    <function name="aero/moment/Roll_differential_propwash">
       <description>Roll moment due to differential propwash</description>
       <product>
           <property>/engines/active-engine/thrust-coefficient</property>
           <property>aero/function/qbar-induced-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/alpha-rad</property>
           <value> 0.1280 </value>
       </product>
    </function>

    <function name="aero/moment/Roll_beta">
       <description>Roll moment due to beta</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/beta-rad</property>
           <property>aero/function/kClge</property>
           <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <independentVar lookup="column">aero/Re</independentVar>
            <tableData>			<!-- Du Y -->
                    1128067  1668183   3707224
             -0.035 -0.1024 -0.031363 -0.010147
              0.175 -1.0147 -0.310788 -0.100549
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/moment/Roll_damp">
       <description>Roll moment due to roll rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/p-aero-rad_sec</property>
           <value> -0.5250 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/moment/Roll_yaw">
       <description>Roll moment due to yaw rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/r-aero-rad_sec</property>
           <property>aero/function/kClge</property>
           <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <independentVar lookup="column">aero/Re</independentVar>
            <tableData>			<!-- Du Y -->
                       557148   1128067    1668183    3707224
             -0.035  0.719318   0.192547   0.071235   0.021888
              0.175  8.422175   2.254452   0.834059   0.256275
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/moment/Roll_aileron">
       <description>Roll moment due to aileron</description>
       <product>
          <property>aero/qbar-psf</property>
          <property>metrics/Sw-sqft</property>
          <property>metrics/bw-ft</property>
          <property>fcs/left-aileron-pos-rad</property>
          <value> 0.3498 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/moment/Roll_rudder">
       <description>Roll moment due to rudder</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>fcs/rudder-pos-rad</property>
           <!--value> 0.0133 </value-->	<!-- Du Y -->
		       <!-- + 0.0004655 (3.5%) = 0.0138 -->
		   <table>
            <independentVar>/sim/model/j3cub/pa-18</independentVar>
            <tableData>
               0   0.0133
               1   0.0138
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/coefficient/Cllwdmg">
        <description>Roll_moment_due_to_damaged_left_wing</description>
        <product>
            <property>aero/qbar-psf</property>
            <property>metrics/Sw-sqft</property>
            <property>metrics/bw-ft</property>
            <property>wing-damage/left-wing</property>
            <value>-0.3</value>
        </product>
    </function>

    <function name="aero/coefficient/Clrwdmg">
        <description>Roll_moment_due_to_damaged_right_wing</description>
        <product>
            <property>aero/qbar-psf</property>
            <property>metrics/Sw-sqft</property>
            <property>metrics/bw-ft</property>
            <property>wing-damage/right-wing</property>
            <value>0.3</value>
        </product>
    </function>
    
  </axis>

  <axis name="YAW">

    <function name="aero/moment/Yaw_beta">
       <description>Yaw moment due to beta</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/beta-rad</property>
           <value> 0.0602 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/moment/Yaw_rol_rate">
       <description>Yaw_moment_due_to_roll_rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/p-rad_sec</property>
           <property>aero/function/kClge</property>
           <table>
            <independentVar lookup="row">aero/Re</independentVar>
            <tableData>			<!-- Du Y -->
               341838  -2.1500
              1128067  -0.1974
              1668183  -0.0531
              3707224  -0.0006
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/moment/Yaw_damp">
       <description>Yaw moment due to yaw rate</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>aero/bi2vel</property>
           <property>velocities/r-aero-rad_sec</property>
           <value> -0.0810 </value>	<!-- Du Y -->
       </product>
    </function>

    <function name="aero/moment/Yaw_rudder">
       <description>Yaw moment due to rudder</description>
       <product>
           <property>aero/function/qbar-induced-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>fcs/rudder-pos-rad</property>
           <!--value> -0.0565 </value-->	<!-- Du Y -->
		       <!-- + 0.0019775 (3.5%) = -0.0585 -->
		   <table>
            <independentVar>/sim/model/j3cub/pa-18</independentVar>
            <tableData>
               0   -0.0565
               1   -0.0585
            </tableData>
          </table>
       </product>
    </function>

    <function name="aero/moment/Yaw_aileron">
       <description>Adverse yaw</description>
       <product>
           <property>aero/qbar-psf</property>
           <property>metrics/Sw-sqft</property>
           <property>metrics/bw-ft</property>
           <property>fcs/left-aileron-pos-rad</property>
           <table>
            <independentVar lookup="row">aero/alpha-rad</independentVar>
            <independentVar lookup="column">aero/Re</independentVar>
            <tableData>                 <!-- Du Y -->
                     1668183    3707224
             -0.035  0.00171    0.00150
              0.175 -0.01890   -0.00173
            </tableData>
          </table>
       </product>
    </function>

  </axis>

 </aerodynamics>

